export GPG_TTY=$(tty)
gpg-connect-agent updatestartuptty /bye >/dev/null

setopt histignorealldups

alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias e='$VISUAL'
alias h='history'
alias o='xdg-open'
alias sudo='doas'

# udiskie
alias uma='udiskie-umount --all'

# Use exa instead of ls and tree
alias l='exa --icons --group-directories-first'
alias la='exa --icons --group-directories-first -a'
alias ll='exa --icons --group-directories-first -l'
alias lla='exa --icons --group-directories-first -la'
alias tree='exa --icons -T'

# systemd
alias jc='journalctl -e'
alias sc='systemctl'

# Use emacs keybindings
bindkey -e

# Enable completions
autoload -Uz compinit && compinit
zstyle ':completion:*' menu select

# Enable aws completion
autoload -U bashcompinit && bashcompinit
complete -C aws_completer aws

# Enable editor
autoload -Uz edit-command-line
zle -N edit-command-line
bindkey '^X^E' edit-command-line

# Enable autosuggestions plugin
if [ -f "/usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh" ]; then
	source "/usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh"
	bindkey "^[[1;5B" autosuggest-execute # ctrl-down
	bindkey "^[[1;5D" backward-word       # ctrl-left
	bindkey "^[[1;5C" forward-word        # ctrl-right
fi

function sourceIfExists {
	[ -f "$1" ] && source "$1"
}

# Enable syntax-highlighting plugin
sourceIfExists "/usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"

# Enable fuzzy finder
sourceIfExists "/usr/share/fzf/key-bindings.zsh"
sourceIfExists "/usr/share/fzf/completion.zsh"

# Define lfcd command
sourceIfExists "$XDG_CONFIG_HOME/lf/lfcd.sh"

# Set lf icons
sourceIfExists "$XDG_CONFIG_HOME/lf/lficons.sh"

# Set starship prompt
eval "$(starship init zsh)"

# Enable zoxide
eval "$(zoxide init zsh)"

# vim: ft=bash
